import{_ as e,a as t,c as n,d as r,f as i,g as a,h as o,i as s,l as c,m as l,n as u,o as d,p as f,r as p,s as m,t as h,u as g}from"./index-BWTtYw4X.js";var _={class:`invite`},v={class:`invite__title`},y={key:0,class:`invite__text`},b={key:0,class:`invite__text`},x={key:0,class:`invite__error`},S={key:1,class:`invite__success`},C={key:2,class:`invite__text`},w={key:3,class:`actions`},T=[`disabled`],E=[`disabled`],D=u(i({__name:`InvitePage`,setup(i){let{t:u}=s(),D=t(),O=d(),k=h(),A=n(()=>String(D.params.token??``).trim()),j=o(!0),M=o(!1),N=o(!1),P=o(null),F=o(!1);f(async()=>{let{data:e}=await p.auth.getSession();if(M.value=!!e.session,j.value=!1,!M.value){O.replace({name:`user`,query:{redirect:D.fullPath}});return}await k.fetchInvites(),k.invites.some(e=>e.token===A.value)||(P.value=u(`invites.errors.notFound`))});let I=async()=>{if(P.value=null,!A.value){P.value=u(`invites.errors.invalidToken`);return}if(!M.value){O.replace({name:`user`,query:{redirect:D.fullPath}});return}N.value=!0;let e=await k.acceptInvite(A.value);if(N.value=!1,!e){P.value=k.error??u(`invites.errors.acceptFailed`);return}F.value=!0,O.replace({name:`user`})},L=async()=>{if(P.value=null,!A.value){P.value=u(`invites.errors.invalidToken`);return}N.value=!0;let e=await k.declineInvite(A.value);if(N.value=!1,!e){P.value=k.error??u(`invites.errors.declineFailed`);return}O.replace({name:`user`})};return(t,n)=>(l(),r(`section`,_,[c(`h1`,v,e(a(u)(`invites.title`)),1),j.value?(l(),r(`p`,y,e(a(u)(`invites.checkingSession`)),1)):(l(),r(m,{key:1},[M.value?(l(),r(m,{key:1},[P.value?(l(),r(`p`,x,e(P.value),1)):F.value?(l(),r(`p`,S,e(a(u)(`invites.joinedSuccess`)),1)):(l(),r(`p`,C,e(a(u)(`invites.hint`)),1)),F.value?g(``,!0):(l(),r(`div`,w,[c(`button`,{type:`button`,class:`btn`,disabled:N.value,onClick:L},e(a(u)(`invites.actions.decline`)),9,T),c(`button`,{type:`button`,class:`btn`,disabled:N.value,onClick:I},e(N.value?a(u)(`invites.actions.processing`):a(u)(`invites.actions.accept`)),9,E)]))],64)):(l(),r(`p`,b,e(a(u)(`invites.redirectingToSignIn`)),1))],64))]))}}),[[`__scopeId`,`data-v-2568a081`]]);export{D as default};